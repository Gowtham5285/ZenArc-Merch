<!DOCTYPE html>
<html>
<head>
  <title>Checkout</title>
  <link rel="stylesheet" href="checkout.css">
</head>

<body>

<div class="checkout-wrapper">

  <h2>ðŸ§¾ Checkout</h2>

  <div class="checkout-grid">

    <!-- Checkout Form -->
    <div class="checkout-form">

      <h3>Customer Details</h3>

      <form id="checkoutForm">

        <label>Full Name</label>
        <input type="text" id="name" required>

        <label>Email</label>
        <input type="email" id="email" required>

        <label>Phone</label>
        <input type="tel" id="phone" required>

        <label>Shipping Address</label>
        <textarea id="address" rows="3" required></textarea>

        <button class="place-order-btn" type="submit">
          Place Order
        </button>

      </form>
    </div>

    <!-- Order Summary -->
    <div class="order-box">

      <h3>Order Summary</h3>

      <div id="orderItems"></div>

      <div class="order-total">
        Grand Total: â‚¹<span id="finalTotal">0</span>
      </div>

    </div>
  </div>
</div>


<script>
const cart = JSON.parse(localStorage.getItem("cart")) || [];
const orderItems = document.getElementById("orderItems");
const finalTotal = document.getElementById("finalTotal");

function loadSummary() {
  let total = 0;
  orderItems.innerHTML = "";

  cart.forEach(item => {
    const sum = item.price * item.qty;
    total += sum;

    const div = document.createElement("div");
    div.className = "order-item";

    div.innerHTML = `
      <img src="${item.img}">
      <div>
        <h4>${item.name}</h4>
        <p>â‚¹${item.price} Ã— ${item.qty}</p>
        <strong>â‚¹${sum}</strong>
      </div>
    `;

    orderItems.appendChild(div);
  });

  finalTotal.textContent = total;
}

loadSummary();


// Handle Order Submit
document.getElementById("checkoutForm").onsubmit = (e) => {
  e.preventDefault();

  if (cart.length === 0) {
    alert("Cart is empty!");
    return;
  }

  const order = {
    name: name.value,
    email: email.value,
    phone: phone.value,
    address: address.value,
    items: cart,
    total: finalTotal.textContent,
    date: new Date().toLocaleString()
  };

  // Save order (optional: send to backend later)
  localStorage.setItem("lastOrder", JSON.stringify(order));

  // Clear cart
  localStorage.removeItem("cart");

  // Redirect to success page
  window.location.href = "order-success.html";
};
</script>

</body>
</html>
